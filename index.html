<!DOCTYPE html>
<meta charset="utf-8" />
<title>xkcd why</title>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bulma/css/bulma.min.css"
/>
<style>
  @keyframes expand {
    0% {
      left: -2ex;
    }
    20% {
      left: -1.5ex;
    }
    40% {
      left: -1ex;
    }
    60% {
      left: -0.5ex;
    }
    80% {
      left: 0;
    }
  }

  .animate {
    animation: expand 1s steps(1, end) infinite;
  }

  a,
  a:hover {
    color: inherit;
  }

  a:hover {
    text-decoration: underline;
  }
</style>

<main class="hero is-fullheight">
  <div class="hero-body">
    <div class="container has-text-centered">
      <h1 class="title is-1 is-spaced">
        why<span class="is-inline-block is-clipped">
          <span class="is-relative animate">....</span>
        </span>
      </h1>
      <h2 class="subtitle">
        <a
          href="https://github.com/kidonng/xkcd-why"
          target="_blank"
          rel="noopener noreferrer"
        >
          GitHub
        </a>
      </h2>
    </div>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/ga-lite/dist/ga-lite.min.js"></script>
<script>
  if (window.galite) {
    galite('create', 'UA-140053908-5', 'auto')
    galite('send', 'pageview')
  }

  const $ = selector => document.querySelector(selector)
  const colors = [
    'white',
    'black',
    'light',
    'dark',
    'primary',
    'link',
    'info',
    'success',
    'warning',
    'danger'
  ]
  const rand = Math.floor(Math.random() * colors.length)

  $('.hero').classList.add(`is-${colors[rand]}`)
  ;(async () => {
    const res = await fetch('/api')

    if (res.ok) {
      const question = await res.text()
      const html = `<a title="Search on Google" href="https://www.google.com/search?q=${question}" rel="noreferrer">${question}</a>`
      $('.title').innerHTML = html
    } else
      $('.title').innerHTML =
        '<span title="*we asked this">why are there request errors</span>'
  })()
</script>
